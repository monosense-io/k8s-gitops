---
apiVersion: external-secrets.io/v1
kind: ClusterSecretStore
metadata:
  name: ${EXTERNAL_SECRET_STORE}
spec:
  provider:
    onepassword:
      connectHost: ${ONEPASSWORD_CONNECT_HOST}
      vaults:
        - K8s            # Primary vault for Kubernetes secrets
        - Infrastructure # Fallback vault (add more as needed)
      auth:
        secretRef:
          connectTokenSecretRef:
            name: ${ONEPASSWORD_CONNECT_TOKEN_SECRET}
            namespace: external-secrets
            key: token
