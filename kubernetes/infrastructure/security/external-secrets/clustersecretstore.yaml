---
apiVersion: external-secrets.io/v1
kind: ClusterSecretStore
metadata:
  name: ${EXTERNAL_SECRET_STORE}
spec:
  provider:
    onepassword:
      connectHost: ${ONEPASSWORD_CONNECT_HOST}
      vaults:
        Prod: 1  # Primary vault for production secrets (priority 1)
        Infra: 2 # Infrastructure vault (priority 2)
      auth:
        secretRef:
          connectTokenSecretRef:
            name: ${ONEPASSWORD_CONNECT_TOKEN_SECRET}
            namespace: external-secrets
            key: token
