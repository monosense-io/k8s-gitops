---
apiVersion: external-secrets.io/v1
kind: ClusterSecretStore
metadata:
  name: ${EXTERNAL_SECRET_STORE}
spec:
  provider:
    onepassword:
      connectHost: ${ONEPASSWORD_CONNECT_HOST}
      vaults:
        K8s: 1            # Primary vault for Kubernetes secrets (priority 1)
        Infrastructure: 2 # Fallback vault (priority 2)
      auth:
        secretRef:
          connectTokenSecretRef:
            name: ${ONEPASSWORD_CONNECT_TOKEN_SECRET}
            namespace: external-secrets
            key: token
