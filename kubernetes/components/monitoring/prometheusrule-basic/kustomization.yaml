---
# PrometheusRule Component - Basic Alerts
# Creates common alert rules for application monitoring
#
# Alerts included:
#   - PodNotReady: Pod not ready for 5 minutes
#   - HighMemoryUsage: Memory usage > 90%
#   - HighCPUUsage: CPU usage > 90%
#   - ContainerRestarting: Container restarting frequently
#
# Usage:
#   apiVersion: kustomize.config.k8s.io/v1beta1
#   kind: Kustomization
#   namespace: my-namespace
#   components:
#     - ../../../components/monitoring/prometheusrule-basic
#
# The rule name will match the namespace

apiVersion: kustomize.config.k8s.io/v1alpha1
kind: Component

resources:
  - prometheusrule.yaml

replacements:
  # Set PrometheusRule name to match namespace
  - source:
      kind: Namespace
      fieldPath: metadata.name
    targets:
      - select:
          kind: PrometheusRule
        fieldPaths:
          - metadata.name
        options:
          create: true
