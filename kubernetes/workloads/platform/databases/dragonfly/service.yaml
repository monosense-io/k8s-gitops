---
apiVersion: v1
kind: Service
metadata:
  name: dragonfly-global
  namespace: dragonfly-system
  labels:
    app.kubernetes.io/name: dragonfly
    app.kubernetes.io/component: database
  annotations:
    # Cilium ClusterMesh global Service
    service.cilium.io/global: "true"
    service.cilium.io/shared: "true"
spec:
  type: ClusterIP
  ports:
    - name: dragonfly
      port: 6379
      targetPort: 6379
      protocol: TCP
    - name: admin
      port: 6380
      targetPort: 6380
      protocol: TCP
  selector:
    app: dragonfly
    dragonflydb.io/instance: dragonfly
    dragonflydb.io/role: primary
