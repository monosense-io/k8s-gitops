---
apiVersion: postgresql.cnpg.io/v1
kind: ScheduledBackup
metadata:
  name: shared-postgres-daily-backup
  namespace: cnpg-system
spec:
  # Schedule: Daily at 02:00:00 UTC (CNPG uses six-field cron: seconds first)
  schedule: "0 0 2 * * *"

  # Backup window
  immediate: false

  # Target cluster
  cluster:
    name: shared-postgres

  # Retention policy (overrides cluster setting for scheduled backups)
  backupOwnerReference: self

  # Method (barmanObjectStore backups are always online)
  method: barmanObjectStore

  # Suspend if needed (for maintenance)
  suspend: false
