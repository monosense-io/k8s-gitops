---
# Bootstrap Prerequisites
# Apply these resources manually before running helmfile:
# kubectl apply -f bootstrap/prerequisites/resources.yaml

# External Secrets namespace
apiVersion: v1
kind: Namespace
metadata:
  name: external-secrets
  labels:
    pod-security.kubernetes.io/enforce: restricted
    pod-security.kubernetes.io/audit: restricted
    pod-security.kubernetes.io/warn: restricted
---
# 1Password Connect Token secret
# Usage: op inject -i bootstrap/prerequisites/resources.yaml | kubectl --context=infra apply -f -
# This token is used by ESO to authenticate to your local 1Password Connect Server
apiVersion: v1
kind: Secret
metadata:
  name: onepassword-connect-token
  namespace: external-secrets
type: Opaque
stringData:
  # Token injected from 1Password vault via 'op inject'
  # Format: op://vault-name/item-name/field-name
  token: "op://homelab/onepassword-connect/credential"
---
# Flux System namespace (will be created by helmfile but including here for completeness)
apiVersion: v1
kind: Namespace
metadata:
  name: flux-system
  labels:
    pod-security.kubernetes.io/enforce: privileged
    pod-security.kubernetes.io/audit: privileged
    pod-security.kubernetes.io/warn: privileged
